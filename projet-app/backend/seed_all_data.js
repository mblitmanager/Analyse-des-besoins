const { Client } = require('pg');

const config = {
  user: 'postgres',
  host: 'localhost',
  database: 'wizzylearn',
  password: 'root',
  port: 5432,
};

const formations = [{"id":11,"slug":"pack-office-word","label":"Pack Office Word","isActive":true,"category":"Bureautique","objectifs":"Maîtriser les principaux outils de bureautique Microsoft. Rédiger et mettre en forme des documents simples. Organiser et structurer ses documents.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h à 20h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"TOSA","programme":"Séquence 1 : Comprendre, rédiger et organiser des documents. Séquence 2 : Mettre en forme avec les outils Word. Séquence 3 : Maîtriser un document long. Séquence 4 : Partager un document de façon sécurisée.","icon":null,"color":null},{"id":12,"slug":"pack-office-excel","label":"Pack Office Excel","isActive":true,"category":"Bureautique","objectifs":"Maîtriser les principaux outils de bureautique Microsoft. Créer des tableaux et des graphiques. Utiliser des formules.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h à 20h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"TOSA","programme":"Séquence 1 : Environnement et bases Excel. Séquence 2 : Calculs et fonctions. Séquence 3 : Mise en forme et graphiques. Séquence 4 : Gestion des données.","icon":null,"color":null},{"id":13,"slug":"excel-expert","label":"Excel Expert","isActive":true,"category":"Bureautique","objectifs":"Maîtriser les fonctionnalités avancées d'Excel. Tableaux croisés dynamiques, fonctions complexes et macros de base.","prequis":"Formation ouverte à tous niveaux. Être à l'aise avec les bases d'Excel.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 12h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"TOSA","programme":"Séquence 1 : Fonctions avancées. Séquence 2 : Analyse de données et TCD. Séquence 3 : Automatisation de base.","icon":null,"color":null},{"id":14,"slug":"pack-office-powerpoint","label":"Pack Office PowerPoint","isActive":true,"category":"Bureautique","objectifs":"Concevoir des présentations percutantes. Utiliser les masques, les animations et les transitions.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"TOSA","programme":"Séquence 1 : Interface et création de diapositives. Séquence 2 : Mise en forme et objets graphiques. Séquence 3 : Animations et diaporamas.","icon":null,"color":null},{"id":15,"slug":"pack-office-outlook","label":"Pack Office Outlook","isActive":true,"category":"Bureautique","objectifs":"Gérer efficacement sa messagerie, son calendrier et ses tâches. Collaborer avec les outils Outlook.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"TOSA","programme":"Séquence 1 : Gestion des mails. Séquence 2 : Calendrier et rendez-vous. Séquence 3 : Gestion des contacts et des tâches.","icon":null,"color":null},{"id":16,"slug":"google-workspace","label":"Google Workspace","isActive":true,"category":"Internet","objectifs":"Maîtriser les outils collaboratifs de Google (Docs, Sheets, Slides, Gmail, Drive). Travail en équipe en temps réel.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"ICDL","programme":"Séquence 1 : Google Drive et stockage. Séquence 2 : Outils de communication (Gmail, Meet). Séquence 3 : Collaboration sur documents.","icon":null,"color":null},{"id":17,"slug":"anglais","label":"Anglais","isActive":true,"category":"Langue","objectifs":"Développer les compétences en compréhension et expression orale/écrite. Préparer le test TOEIC. Vocabulaire business.","prequis":"Maîtriser le français. Disposer du matériel informatique adapté. Bases d'anglais recommandées.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 15h à 20h accompagnement.","dateEnregistrement":"17/08/2025","certificateur":"TOEIC","programme":"Séquence 1 : Grammaire et vocabulaire thématique. Séquence 2 : Compréhension orale et écrite. Séquence 3 : Expression orale et prononciation. Séquence 4 : Préparation intensive TOEIC.","icon":null,"color":null},{"id":18,"slug":"français","label":"Français","isActive":true,"category":"Langue","objectifs":"Améliorer l'orthographe, la grammaire et la syntaxe. Préparer le certificat Voltaire. Communication professionnelle.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 15h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"Voltaire","programme":"Séquence 1 : Orthographe et grammaire de base. Séquence 2 : Syntaxe et ponctuation. Séquence 3 : Rédaction professionnelle. Séquence 4 : Préparation Certificat Voltaire.","icon":null,"color":null},{"id":19,"slug":"illustrator","label":"Illustrator","isActive":true,"category":"Création","objectifs":"Concevoir des illustrations et des logos vectoriels. Maîtriser les outils de dessin et de mise en page.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"TOSA","programme":"Séquence 1 : Interface et outils de base. Séquence 2 : Dessin vectoriel et formes. Séquence 3 : Couleurs et dégradés. Séquence 4 : Exportation et impression.","icon":null,"color":null},{"id":20,"slug":"photoshop","label":"Photoshop","isActive":true,"category":"Création","objectifs":"Retoucher des images et des photos avec expertise. Découvrir les outils d'IA générative de Photoshop.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h à 12h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"ICDL / TOSA","programme":"Séquence 1 : Retouche photo et calques. Séquence 2 : Sélections et masques. Séquence 3 : Filtres et effets. Séquence 4 : IA générative.","icon":null,"color":null},{"id":21,"slug":"sketchup","label":"Sketchup","isActive":true,"category":"Création","objectifs":"Concevoir des projets d'aménagement intérieur et extérieur en 3D. Modéliser des espaces et des objets.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 10h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"ICDL","programme":"Séquence 1 : Bases de la modélisation 3D. Séquence 2 : Matériaux et textures. Séquence 3 : Rendu et présentation.","icon":null,"color":null},{"id":22,"slug":"wordpress","label":"WordPress","isActive":true,"category":"Internet","objectifs":"Créer et administrer un site internet sur-mesure. Gérer les thèmes, les extensions et le contenu.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 12h à 14h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"TOSA / ICDL","programme":"Séquence 1 : Installation et configuration. Séquence 2 : Création de pages et articles. Séquence 3 : Personnalisation avec thèmes et plugins. Séquence 4 : Sécurité et SEO.","icon":null,"color":null},{"id":23,"slug":"digcomp","label":"DigComp","isActive":true,"category":"Internet","objectifs":"Améliorer sa culture numérique globale. Maîtriser les outils informatiques et la sécurité en ligne.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. Accès e-learning 1 an + 12h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"DigComp","programme":"Séquence 1 : Recherche d'information et veille. Séquence 2 : Communication et collaboration. Séquence 3 : Création de contenu numérique. Séquence 4 : Sécurité et protection des données.","icon":null,"color":null},{"id":24,"slug":"intelligence-artificielle-générative","label":"Intelligence Artificielle Générative","isActive":true,"category":"IA","objectifs":"Maîtriser l'usage responsable de l'IA générative pour la création de contenus rédactionnels et visuels.","prequis":"Formation ouverte à tous niveaux. Disposer du matériel informatique adapté. Accès internet.","modaliteDuree":"Individuelle à votre rythme. 21h dont 12h accompagnement.","dateEnregistrement":"18/12/2024","certificateur":"Certification Interne / RS","programme":"Séquence 1 : Fondamentaux de l'IA. Séquence 2 : Prompt engineering. Séquence 3 : Création de textes et images. Séquence 4 : Éthique et limites de l'IA.","icon":null,"color":null},{"id":25,"slug":"toeic","label":"Anglais (TOEIC)","isActive":true,"category":null,"objectifs":null,"prequis":null,"modaliteDuree":null,"dateEnregistrement":null,"certificateur":null,"programme":null,"icon":null,"color":null},{"id":30,"slug":"voltaire","label":"Français (Voltaire)","isActive":true,"category":null,"objectifs":null,"prequis":null,"modaliteDuree":null,"dateEnregistrement":null,"certificateur":null,"programme":null,"icon":null,"color":null},{"id":31,"slug":"word","label":"Word","isActive":true,"category":"Bureautique","objectifs":null,"prequis":null,"modaliteDuree":null,"dateEnregistrement":null,"certificateur":null,"programme":null,"icon":null,"color":null},{"id":32,"slug":"excel","label":"Excel","isActive":true,"category":"Bureautique","objectifs":null,"prequis":null,"modaliteDuree":null,"dateEnregistrement":null,"certificateur":null,"programme":null,"icon":null,"color":null},{"id":33,"slug":"outlook","label":"Outlook","isActive":true,"category":"Bureautique","objectifs":null,"prequis":null,"modaliteDuree":null,"dateEnregistrement":null,"certificateur":null,"programme":null,"icon":null,"color":null},{"id":34,"slug":"powerpoint","label":"PowerPoint","isActive":true,"category":"Bureautique","objectifs":null,"prequis":null,"modaliteDuree":null,"dateEnregistrement":null,"certificateur":null,"programme":null,"icon":null,"color":null}];

const sessions = [{"id":"f0c65931-3668-4c84-bb63-900335a98992","brand":"aopia","civilite":"M.","nom":"Verbeke","prenom":"Syriac","telephone":"600000000","conseiller":"Jean Dupont","formationChoisie":"Anglais TOEIC","prerequisiteScore":{"level_global":"Débutant","freq_ordi":"Occasionnelle","skill_hardware":null,"skill_win":"Moyen","skill_web":null,"softwares":["Tableur"],"admin_online":"Non","security_skills":["Protéger votre ordinateur avec un antivirus"]},"levelsScores":{"A1":null,"A2":null,"B1":null,"B2":null,"C1":null},"stopLevel":null,"finalRecommendation":"Formation non reconnue","createdAt":"2026-02-21 09:29:06.659063","emailSentAt":null,"stagiaireId":null,"scorePretest":null,"complementaryQuestions":null,"availabilities":null}];

async function seedData() {
  const client = new Client(config);
  try {
    await client.connect();
    console.log('Connecté à la base de données.');

    // 1. Sync Formations
    console.log('Nettoyage des formations...');
    await client.query('TRUNCATE TABLE formations RESTART IDENTITY CASCADE');
    for (const f of formations) {
      await client.query(
        'INSERT INTO formations (id, slug, label, "isActive", category, objectifs, prequis, "modaliteDuree", "dateEnregistrement", certificateur, programme) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)',
        [f.id, f.slug, f.label, f.isActive, f.category, f.objectifs, f.prequis, f.modaliteDuree, f.dateEnregistrement, f.certificateur, f.programme]
      );
    }
    console.log(`${formations.length} formations syncrhonisées.`);

    // 2. Sync Sessions
    console.log('Nettoyage des sessions...');
    await client.query('TRUNCATE TABLE sessions RESTART IDENTITY CASCADE');
    for (const s of sessions) {
      await client.query(
        `INSERT INTO sessions (id, brand, civilite, nom, prenom, telephone, conseiller, "formationChoisie", "prerequisiteScore", "levelsScores", "stopLevel", "finalRecommendation", "createdAt") 
         VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)`,
        [s.id, s.brand, s.civilite, s.nom, s.prenom, s.telephone, s.conseiller, s.formationChoisie, JSON.stringify(s.prerequisiteScore), JSON.stringify(s.levelsScores), s.stopLevel, s.finalRecommendation, s.createdAt]
      );
    }
    console.log(`${sessions.length} sessions synchronisées.`);

    console.log('Toutes les tables ont été mises à jour !');
  } catch (err) {
    console.error('Erreur during seeding:', err);
  } finally {
    await client.end();
  }
}

seedData();
